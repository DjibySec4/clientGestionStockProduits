 <ng-container *ngIf="data;">
 <div class="container">
  <h3 class="mt-4">{{ title }}</h3><br>
  <div class="row">
      <div class="col-lg-7">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th *ngFor="let dataModel of dataModelList">{{ dataModel.columnReference }}</th>
                        <th>
                          <button class="btn btn-outline-primary" (click)="operation = 'add'; init();">Add</button>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of data">
                        <td *ngFor="let dataModel of dataModelList">{{ item[dataModel.columnName] }}</td>
                        <td>
                          <button  class="btn btn-outline-primary" (click)="operation = 'edit'; selectedItem = item;">Edit</button>
                          <button  class="btn btn-outline-danger ml-2" (click)="operation = 'remove'; selectedItem = item;">Remove</button>
                        </td>
                    </tr>
                </tbody>
            </table>
      </div>

      <div class="col-lg-5">
          <div class="card">
              <div class="card-header bg-info text-white">
                  {{
                    operation == 'add' ? 'Ajouter' :
                    operation == 'edit' ? 'Modifier' :
                    operation == 'remove' ? 'Supprimer' : ''
                  }}
              </div>
              <div class="card-body">

                <div  *ngIf="operation == 'add' || operation== 'edit' ">
                  <form [formGroup]="crudForm">

                      <div  *ngFor="let dataModel of dataModelList">

                        <div class="form-group"  [ngSwitch]="dataModel.dataType" *ngIf="!dataModel.readonly">
                           <label for="{{ dataModel.columnName }">{{ dataModel.columnReference }}:</label>
                           <input *ngSwitchCase="'string'" type="text" formControlName="{{ dataModel.columnName }}" class="form-control" id="{{ dataModel.columnName }}" [(ngModel)]="selectedItem[dataModel.columnName]"/>
                           <input *ngSwitchCase="'number'" type="number" formControlName="{{ dataModel.columnName }}" class="form-control" id="{{ dataModel.columnName }}" [(ngModel)]="selectedItem[dataModel.columnName]"/>
                       </div>
                       <!-- <div class="alert alert-danger" *ngIf="crudForm.controls['ref'].invalid &&
                               (crudForm.controls['{{ dataModel.columnName }}'].touched || crudForm.controls['{{ dataModel.columnName }}'].dirty)">
                           La référence est  obligatoire !
                       </div> -->
                      </div>

                      <button class="btn btn-success" [disabled]="crudForm.invalid" (click)="operation == 'add' ? add() : update()">
                        {{
                          operation == 'add' ? 'Ajouter' :
                          operation == 'edit' ? 'Modifier' : ''
                        }}
                      </button>
                  </form>
                </div>

                <div *ngIf="operation== 'remove'">
                    <p class="card-title">
                        Réference : {{ selectedItem.id }}
                    </p>

                    <p>Voulez-vous vraîment supprimer cet élément  ? </p>
                    <button class="btn btn-success" [disabled]="!selectedItem.id" (click)="delete()">Confirmer</button>
                </div>
            </div>
            <div class="card-footer">
              footer
          </div>
          </div>
      </div>
  </div>
</div>
</ng-container>

<ng-template>
  Loading ...
</ng-template>
